---
- name: update FreeBSD repository catalogue
  raw: /usr/sbin/pkg update

- name: install Python 
  raw: /usr/sbin/pkg install -y python

- name: set live hostname to master
  hostname: name=master

- name: set configured hostname to master
  lineinfile: dest=/etc/rc.conf regexp=^hostname= line=hostname=master
  notify: 
    - restart syslogd

- name: copy SSH daemon configuration
  copy: src=sshd_config dest=/etc/ssh/sshd_config
          owner=root group=wheel mode=0644
  notify: restart SSH daemon

- name: disable sendmail in rc.conf
  lineinfile: dest=/etc/rc.conf regexp='^sendmail_enable=' line='sendmail_enable=\"NONE\"'

- name: stop sendmail service
  service: name=sendmail state=stopped

- name: disable resolvconf
  copy: src=resolvconf.conf dest=/etc/resolvconf.conf

- name: deploy custom resolv.conf template
  template: src=resolv.conf.j2 dest=/etc/resolv.conf
